/***
|Description|highlights saving button (bold red) and the document title (adds a leading "*") when there are unsaved changes|
|Version|1.2|
|Author|Yakov Litvin|
***/
//{{{
// add the "saveChangesButton" class to the save changes button
config.macros.saveChanges.SCM_orig_handler = config.macros.saveChanges.handler;
config.macros.saveChanges.handler = function(place,macroName,params)
{
	this.SCM_orig_handler.apply(this,arguments);
	place.lastChild.classList.add("saveChangesButton");
};
// styles that highlight save button when there's something to save
config.showDirtyCss =
	".saveChangesButton { font-weight: bold; color: red !important; }";

TiddlyWiki.prototype.SCM_orig_setDirty = TiddlyWiki.prototype.setDirty;
TiddlyWiki.prototype.setDirty = function(dirty)
{
	if(dirty) {
		setStylesheet(config.showDirtyCss,"suggestSavingOnDirty");
		if(document.title[0] != "*")
			document.title = "*"+document.title;
	} else {
		removeStyleSheet("suggestSavingOnDirty");
		if(document.title[0] == "*")
			document.title = document.title.substr(1);
	}
	return this.SCM_orig_setDirty.apply(this,arguments);
};
//}}}